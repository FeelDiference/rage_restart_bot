# Rage MP Server Status API Addon

HTTP API –∞–¥–¥–æ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ Rage MP —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API endpoints –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–∞ –±–æ—Ç–æ–º.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞**: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ
- **–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤**: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–∞—Ö  
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è**: Health check endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: IP-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å ES modules –∏ Rage MP environment

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É server-status –≤ –ø–∞–ø–∫—É packages/ –≤–∞—à–µ–≥–æ Rage MP —Å–µ—Ä–≤–µ—Ä–∞
cp -r server-status /path/to/ragemp-server/packages/
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd /path/to/ragemp-server/packages/server-status
npm install
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `index.mjs`:

```javascript
const CONFIG = {
    PORT: 30120,                    // –ü–æ—Ä—Ç –¥–ª—è API
    API_PATH: '/api/status',        // –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å API
    ALLOWED_IPS: [                  // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP
        '127.0.0.1',
        '::1',
        'YOUR_BOT_IP'               // IP –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
    ],
    STATS_UPDATE_INTERVAL: 5000     // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–º—Å)
};
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Rage MP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–¥–æ–Ω–∞.

## üîó API Endpoints

### GET /api/status
–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
```json
{
    "success": true,
    "timestamp": 1640995200000,
    "server": {
        "name": "My Rage Server",
        "gamemode": "RageMP", 
        "version": "1.0.0",
        "uptime": 3600000,
        "uptime_formatted": "1—á 0–º",
        "status": "running"
    },
    "players": {
        "online": 15,
        "max": 100,
        "list": [...]
    },
    "performance": {
        "memoryUsage": 256.5,
        "ticksPerSecond": 60
    }
}
```

### GET /api/players
–ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
```json
{
    "success": true,
    "count": 15,
    "max": 100,
    "players": [
        {
            "id": 1,
            "name": "Player1",
            "ping": 50,
            "ip": "127.0.0.1"
        }
    ],
    "timestamp": 1640995200000
}
```

### GET /api/health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```json
{
    "status": "ok",
    "timestamp": 1640995200000,
    "uptime": 3600000
}
```

### GET /api/info
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API
```json
{
    "success": true,
    "server": {
        "name": "My Rage Server",
        "version": "1.0.0",
        "gamemode": "RageMP",
        "maxPlayers": 100,
        "startTime": 1640991600000
    },
    "api": {
        "version": "1.0",
        "endpoints": [
            "/api/status",
            "/api/players",
            "/api/health", 
            "/api/info"
        ]
    }
}
```

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ Rage MP API
–ê–¥–¥–æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ `mp.*` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:

```javascript
function isMpAvailable() {
    return typeof mp !== 'undefined' && mp !== null;
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∏ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

```javascript
setInterval(updateServerStats, CONFIG.STATS_UPDATE_INTERVAL);
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏/–æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–æ–≤:

```javascript
mp.events.add('playerJoin', updateServerStats);
mp.events.add('playerQuit', updateServerStats);
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **IP-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `ALLOWED_IPS` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
2. **–û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç**: API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É –æ—Ç –∏–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
4. **Error handling**: –í—Å–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ "Cannot find package 'express'"
```bash
cd packages/server-status
npm install
```

### –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
–ò–∑–º–µ–Ω–∏—Ç–µ `CONFIG.PORT` –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç –≤ `index.mjs`.

### API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç
3. –î–æ–±–∞–≤—å—Ç–µ IP –±–æ—Ç–∞ –≤ `ALLOWED_IPS`

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥–¥–æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Rage MP environment, –∞ –Ω–µ –∫–∞–∫ standalone Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

## üìù –õ–æ–≥–∏

–ê–¥–¥–æ–Ω –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```
[Status API] –ê–¥–¥–æ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!
[Status API] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 30120
[Status API] –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ mp.config
[Status API] –°–æ–±—ã—Ç–∏—è –∏–≥—Ä–æ–∫–æ–≤ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
```

## üîÑ –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å

- **v1.0**: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
  - REST API endpoints
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤
  - Health checks
  - IP-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.