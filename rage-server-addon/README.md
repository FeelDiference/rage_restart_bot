# Rage MP Server Status API Addon

–ü—Ä–æ—Å—Ç–æ–π HTTP API –∞–¥–¥–æ–Ω –¥–ª—è Rage MP —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è Telegram –±–æ—Ç–∞.

## üìÅ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É server-status –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é packages –≤–∞—à–µ–≥–æ Rage —Å–µ—Ä–≤–µ—Ä–∞
cp -r rage-server-addon/server-status /path/to/your/ragemp/server/packages/
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –∞–¥–¥–æ–Ω–∞
cd /path/to/your/ragemp/server/packages/server-status

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à Rage MP —Å–µ—Ä–≤–µ—Ä. –ê–¥–¥–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.

## üîå API Endpoints

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ä—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ 30120):

### `/api/status` - –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
curl http://your-server:30120/api/status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "timestamp": 1703123456789,
  "server": {
    "name": "My Rage Server",
    "gamemode": "RageMP",
    "version": "1.0",
    "uptime": 3600000,
    "uptime_formatted": "1—á 0–º",
    "status": "running"
  },
  "players": {
    "online": 15,
    "max": 100,
    "list": [
      {"id": 1, "name": "Player1"},
      {"id": 2, "name": "Player2"}
    ]
  },
  "performance": {
    "memoryUsage": 256.5,
    "ticksPerSecond": 60
  }
}
```

### `/api/players` - –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤

```bash
curl http://your-server:30120/api/players
```

### `/api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
curl http://your-server:30120/api/health
```

### `/api/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

```bash
curl http://your-server:30120/api/info
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `CONFIG` –≤ —Ñ–∞–π–ª–µ `index.mjs`:

```javascript
const CONFIG = {
    PORT: 30120,                    // –ü–æ—Ä—Ç API
    API_PATH: '/api/status',        // –ü—É—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É API
    ALLOWED_IPS: [                  // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP
        '127.0.0.1',
        '81.177.220.187'              // IP –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
    ],
    STATS_UPDATE_INTERVAL: 5000     // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–º—Å)
};
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω —Å –ª—é–±—ã—Ö IP. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥—ã —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ IP:

```javascript
if (!CONFIG.ALLOWED_IPS.includes(clientIP)) {
    return res.status(403).json({ error: '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω' });
}
```

### Firewall

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ API:

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å IP –±–æ—Ç–∞
sudo ufw allow from 81.177.220.187 to any port 30120
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–¥–¥–æ–Ω–∞

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:
   ```
   [Status API] –ê–¥–¥–æ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!
   [Status API] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 30120
   ```

2. **–¢–µ—Å—Ç API –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   curl http://localhost:30120/api/health
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ –±–æ—Ç–∞:**
   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   ```yaml
   monitoring:
     health_check_url: "http://81.177.220.187:30120/api/status"
   ```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç** - –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ CONFIG –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç

2. **Express –Ω–µ –Ω–∞–π–¥–µ–Ω** - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`

3. **API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–¥–¥–æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ê–¥–¥–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞ —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:

```yaml
# config/config.yaml
monitoring:
  health_check_url: "http://81.177.220.187:30120/api/status"
  host: "81.177.220.187"
  tcp_ports:
    - 30120
    - 30121
    - 30122
```

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö endpoints —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö –≤ `index.mjs`:

```javascript
// –ü—Ä–∏–º–µ—Ä: –ø–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
app.get('/api/economy', (req, res) => {
    res.json({
        success: true,
        economy: {
            totalMoney: getTotalServerMoney(),
            activeBusiness: getActiveBusinessCount()
        }
    });
});
```

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Rage MP —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –ª–æ–≥–∞–º–∏